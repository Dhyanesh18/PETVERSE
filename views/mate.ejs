<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PetVerse - Find a Mate</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">   
    <link rel="stylesheet" href="/css/mate.css">
</head>
<body>
    <header class="header" id="header">
        <nav id="navbar" class="navbar">
            <div class="nav-content">
                <div class="logo"><a href="/"><i class="fa fa-paw"></i> PetVerse</a></div>
                <div class="nav-icons">
                    <button onclick="window.location.href='/cart'"class="icon-btn"><i class="fa fa-shopping-cart"></i></button>
                    <button onclick="window.location.href='/login'" class="icon-btn"><i class="fa fa-user"></i></button>
                </div>
                <div class="search">
                    <input class="search-bar" type="text" placeholder=" Search pets, products or services">
                    <button class="search-btn"><i class="fa fa-search"></i></button>
                </div>
                <button class="hamburger" id="hamburger">
                    <i class="fa fa-bars"></i>
                </button>
                <ul class="nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/about">About</a></li>
                    <li><a href="/pets">Pets</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle">Products <i class="fa fa-angle-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="/products/petfood">Pet Food</a></li>
                            <li><a href="/products/toys">Toys</a></li>
                            <li><a href="/products/accessories">Accessories</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle">Services <i class="fa fa-angle-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="/services">Services</a></li>
                            <li><a href="/mate">PetMate</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <br>
    <!-- Main Content -->
    <div class="main-container">
        <!-- Filters Sidebar -->
        <div class="filters-sidebar">
            <h2>Find the Perfect Match</h2>
            
            <!-- Pet Type Filter -->
            <div class="filter-section">
                <h3>Pet Type</h3>
                <div class="filter-options">
                    <% petTypes.forEach(type => { %>
                        <div class="filter-option">
                            <input type="checkbox" id="type-<%= type.value %>" name="petType" value="<%= type.value %>">
                            <label for="type-<%= type.value %>"><%= type.label %></label>
                        </div>
                    <% }); %>
                </div>
            </div>
            
            <!-- Gender Filter -->
            <div class="filter-section">
                <h3>Gender</h3>
                <div class="filter-options">
                    <div class="filter-option">
                        <input type="checkbox" id="gender-male" name="gender" value="male">
                        <label for="gender-male">Male</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="gender-female" name="gender" value="female">
                        <label for="gender-female">Female</label>
                    </div>
                </div>
            </div>
            
            <!-- Breed Filter -->
            <div class="filter-section">
                <h3>Breed</h3>
                <div class="filter-options">
                    <% breeds.forEach(breed => { %>
                        <div class="filter-option">
                            <input type="checkbox" id="breed-<%= breed.value %>" name="breed" value="<%= breed.value %>">
                            <label for="breed-<%= breed.value %>"><%= breed.label %></label>
                        </div>
                    <% }); %>
                </div>
            </div>
            
            <!-- Age Filter -->
            <div class="filter-section">
                <h3>Age</h3>
                <div class="filter-options">
                    <div class="filter-option">
                        <input type="checkbox" id="age-puppy" name="age" value="puppy">
                        <label for="age-puppy">Less than 1 year</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="age-young" name="age" value="young">
                        <label for="age-young">1-3 years</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="age-adult" name="age" value="adult">
                        <label for="age-adult">4-7 years</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="age-senior" name="age" value="senior">
                        <label for="age-senior">8+ years</label>
                    </div>
                </div>
            </div>
            
            <!-- Location Filter - State -->
            <div class="filter-section">
                <h3>State</h3>
                <div class="filter-options">
                    <select id="state-filter" name="state">
                        <option value="">Select State</option>
                        <% states.forEach(state => { %>
                            <option value="<%= state.value %>"><%= state.label %></option>
                        <% }); %>
                    </select>
                </div>
            </div>
            
            <!-- Location Filter - District -->
            <div class="filter-section">
                <h3>District</h3>
                <div class="filter-options">
                    <input type="text" id="district-filter" name="district" placeholder="Enter district name">
                </div>
            </div>
            
            <button id="apply-filters" class="filter-btn">Apply Filters</button>
            <button id="clear-filters" class="filter-btn clear-btn">Clear All Filters</button>
        </div>

        <!-- Pets Display Area -->
        <div class="pets-container">
            <div class="pets-header">
                <h1>Pet Mating Partners</h1>
                <select class="sort-dropdown">
                    <option value="recent">Most Recent</option>
                    <option value="age-young">Age: Youngest First</option>
                    <option value="age-old">Age: Oldest First</option>
                    <option value="location">Nearest Location</option>
                </select>
            </div>

            <!-- Pets Grid -->
            <!-- Pets Grid with Debug -->
<div class="pets-grid">
    <!-- DEBUG INFO -->
    <div style="background-color: #f8f9fa; padding: 10px; margin-bottom: 15px; border-radius: 5px;">
        <h3>Debug Information</h3>
        <p>Number of pets in array: <%= pets ? pets.length : 'undefined' %></p>
        <p>Array type: <%= Array.isArray(pets) ? 'Valid Array' : 'Not an Array' %></p>
        
        <% if (pets && pets.length > 0) { %>
            <p>First pet info:</p>
            <ul>
                <li>ID: <%= pets[0]._id %></li>
                <li>Name: <%= pets[0].name %></li>
                <li>Type: <%= pets[0].petType %></li>
                <li>Has images: <%= pets[0].images && pets[0].images.length ? 'Yes' : 'No' %></li>
            </ul>
        <% } else { %>
            <p>No pet objects available to display</p>
        <% } %>
    </div>
    
    <!-- Regular display section -->
    <div>
        <% if (!pets || pets.length === 0) { %>
            <p>No pets found in the database.</p>
        <% } else { %>
            <% pets.forEach((pet, index) => { %>
                <div class="pet-card">
                    <div class="pet-image">
                        <% if (pet.images && pet.images.length > 0) { %>
                            <img src="/mate/image/<%= pet._id %>/0" alt="<%= pet.name %>">
                        <% } else { %>
                            <img src="/images/default-pet.jpg" alt="No image available">
                        <% } %>
                        <div class="pet-badge <%= pet.gender === 'male' ? 'male' : 'female' %>">
                            <i class="fas <%= pet.gender === 'male' ? 'fa-mars' : 'fa-venus' %>"></i>
                        </div>
                    </div>
                    <div class="pet-info">
                        <h3 class="pet-name"><%= pet.name %></h3>
                        <div class="pet-details">
                            <p><strong>Type:</strong> <%= pet.petType ? pet.petType.toUpperCase() : 'Not specified' %></p>
                            <p><strong>Breed:</strong> <%= pet.breed || 'Unknown breed' %></p>
                            <p><strong>Age:</strong> 
                                <%= pet.age && pet.age.value ? pet.age.value : 'Unknown' %> 
                                <%= pet.age && pet.age.unit ? pet.age.unit : '' %>
                            </p>
                            <p><strong>Location:</strong> 
                                <%= pet.location && pet.location.district ? pet.location.district : 'Unknown district' %>, 
                                <%= pet.location && pet.location.state ? pet.location.state : 'Unknown state' %>
                            </p>
                        </div>
                    </div>
                </div>
            <% }); %>
        <% } %>
    </div>
</div>

            <!-- Pagination -->
            <div class="pagination">
                <button><i class="fas fa-chevron-left"></i></button>
                <button class="active">1</button>
                <button>2</button>
                <button>3</button>
                <button>...</button>
                <button>10</button>
                <button><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
    </div>

    <div class="mate-submission-section">
        <div class="submission-header">
            <h2><i class="fa fa-heart"></i> List Your Pet for Mating</h2>
            <p>Help your pet find the perfect match in the PetVerse community</p>
        </div>
        
        <form class="mate-submission-form" action="/pets/mate/add" method="post" enctype="multipart/form-data">
            <div class="form-grid">
                <div class="form-group">
                    <label for="pet-name">Pet Name <span class="required">*</span></label>
                    <input type="text" id="pet-name" name="petName" required>
                </div>
                
                <div class="form-group">
                    <label for="pet-type">Pet Type <span class="required">*</span></label>
                    <select id="pet-type" name="petType" required>
                        <option value="">Select Pet Type</option>
                        <option value="dog">Dog</option>
                        <option value="cat">Cat</option>
                        <option value="bird">Bird</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="pet-breed">Breed <span class="required">*</span></label>
                    <input type="text" id="pet-breed" name="breed" required>
                </div>
                
                <div class="form-group">
                    <label for="pet-age">Age <span class="required">*</span></label>
                    <div class="age-input-group">
                        <input type="number" 
                               id="pet-age-value" 
                               name="ageValue" 
                               min="0" 
                               step="0.5" 
                               required
                               class="form-input">
                        <select id="pet-age-unit" 
                                name="ageUnit" 
                                required
                                class="form-input">
                            <option value="months">Months</option>
                            <option value="years">Years</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Gender <span class="required">*</span></label>
                    <div class="radio-group">
                        <input type="radio" id="male" name="gender" value="male" required>
                        <label for="male">Male</label>
                        <input type="radio" id="female" name="gender" value="female">
                        <label for="female">Female</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="pet-registration">Registration Number (if any)</label>
                    <input type="text" id="pet-registration" name="registrationNumber">
                </div>
                
                <div class="form-group">
                    <label for="state">State <span class="required">*</span></label>
                    <select id="state" name="state" required>
                        <option value="">Select State</option>
                        <option value="andhra-pradesh">Andhra Pradesh</option>
                        <option value="kerala">Kerala</option>
                        <option value="karnataka">Karnataka</option>
                        <option value="tamil-nadu">Tamil Nadu</option>
                        <option value="telangana">Telangana</option>
                        <!-- Add more states as needed -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="district">District <span class="required">*</span></label>
                    <input type="text" id="district" name="district" required>
                </div>
                
                <div class="form-group full-width">
                    <label for="pet-description">Description <span class="required">*</span></label>
                    <textarea id="pet-description" name="description" rows="4" placeholder="Describe your pet's personality, health, past breeding history, and any specific preferences for a mate." required></textarea>
                </div>
                
                <div class="form-group full-width">
                    <label for="pet-image">Upload Pet Images <span class="required">*</span></label>
                    <div class="image-upload-container">
                        <input type="file" id="pet-image" name="petImage" accept="image/*" multiple required>
                        <label for="pet-image" class="image-upload-label">
                            <i class="fas fa-cloud-upload-alt"></i> Choose Files
                        </label>
                        <span class="file-info">No files chosen (Max 4 images)</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="owner-contact">Contact Number <span class="required">*</span></label>
                    <input type="tel" id="owner-contact" name="contactNumber" required>
                </div>
                
                <div class="form-group">
                    <label for="owner-email">Email <span class="required">*</span></label>
                    <input type="email" id="owner-email" name="email" required>
                </div>
                
                <div class="form-group full-width">
                    <div class="terms-container">
                        <input type="checkbox" id="health-check" name="healthCheck" required>
                        <label for="health-check">I confirm my pet is healthy and has all necessary vaccinations <span class="required">*</span></label>
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <div class="terms-container">
                        <input type="checkbox" id="terms" name="terms" required>
                        <label for="terms">I agree to PetVerse's <a href="/terms">Terms & Conditions</a> <span class="required">*</span></label>
                    </div>
                </div>
            </div>
            
            <button type="submit" class="submit-mate-btn">List Your Pet for Mating</button>
        </form>
    </div>

    <footer id="footer">
        <div class="footer-container">
            <div class="footer-logo">
                <h2>PetVerse</h2>
                <p>Your one-stop destination for all pet needs</p>
            </div>
            <div class="footer-links">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Shop</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Events</a></li>
                    <li><a href="#">Contact Us</a></li>
                </ul>
            </div>
            <div class="footer-social">
                <h3>Follow Us</h3>
                <a href="https://facebook.com" target="_blank" class="social-icon">Facebook</a>
                <a href="https://instagram.com" target="_blank" class="social-icon">Instagram</a>
                <a href="https://twitter.com" target="_blank" class="social-icon">Twitter</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 PetVerse. All Rights Reversed</p>
        </div>
      </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Dropdown menu functionality
    const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
    
    dropdownToggles.forEach(toggle => {
        toggle.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Get the current dropdown menu
            const currentDropdownMenu = this.nextElementSibling;
            
            // Close all other dropdown menus
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
                if (menu !== currentDropdownMenu) {
                    menu.classList.remove('show');
                }
            });
            
            // Toggle the current dropdown menu
            currentDropdownMenu.classList.toggle('show');
        });
    });
    
    // Close dropdown menus when clicking outside
    document.addEventListener('click', function(e) {
        let clickedInsideDropdown = false;
        
        // Check if click was inside any dropdown toggle or menu
        dropdownToggles.forEach(toggle => {
            const dropdownMenu = toggle.nextElementSibling;
            if (toggle.contains(e.target) || (dropdownMenu && dropdownMenu.contains(e.target))) {
                clickedInsideDropdown = true;
            }
        });
        
        // If clicked outside dropdowns, close all of them
        if (!clickedInsideDropdown) {
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
                menu.classList.remove('show');
            });
        }
    });

    // Filter functionality
    const clearFiltersBtn = document.getElementById('clear-filters');
    if (clearFiltersBtn) {
        clearFiltersBtn.addEventListener('click', function() {
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            const stateFilter = document.getElementById('state-filter');
            const districtFilter = document.getElementById('district-filter');
            if (stateFilter) stateFilter.value = '';
            if (districtFilter) districtFilter.value = '';
        });
    }

    // Contact button functionality
    document.querySelectorAll('.contact-btn').forEach(button => {
        button.addEventListener('click', function() {
            const petCard = this.closest('.pet-card');
            const petName = petCard.querySelector('.pet-name').textContent;
            const contactInfo = petCard.querySelector('.pet-details p:nth-child(4)').textContent;
            alert(`Contact the owner of ${petName} at ${contactInfo.split(':')[1].trim()}`);
        });
    });

    // Check if the form exists on the page
    const mateForm = document.querySelector('.mate-submission-form');
    if (mateForm) {
        // File upload functionality
        const fileInput = document.getElementById('pet-image');
        const fileInfo = document.querySelector('.file-info');
        
        if (fileInput && fileInfo) {
            fileInput.addEventListener('change', function() {
                if (fileInput.files.length > 0) {
                    fileInfo.textContent = `${fileInput.files.length} file(s) selected`;
                } else {
                    fileInfo.textContent = 'No files chosen (Max 4 images)';
                }
            });
        }
        
        // Form validation
        mateForm.addEventListener('submit', function(event) {
            // Basic validation example
            const fileInput = document.getElementById('pet-image');
            if (fileInput && fileInput.files.length > 4) {
                event.preventDefault();
                alert('Please select a maximum of 4 images');
            }
        });
        
        // Optional: State-district relationship
        const stateSelect = document.getElementById('state');
        const districtInput = document.getElementById('district');
        
        if (stateSelect && districtInput) {
            stateSelect.addEventListener('change', function() {
                districtInput.placeholder = `Enter district in ${stateSelect.options[stateSelect.selectedIndex].text}`;
            });
        }
    }
    
    // Hamburger menu functionality
    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');
    
    if (hamburger && navLinks) {
        hamburger.addEventListener('click', function() {
            navLinks.classList.toggle('active');
        });
    }
});
</script>
    </script>
</body>
</html>