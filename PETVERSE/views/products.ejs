<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PetVerse - <%= categoryTitle %></title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/products.css">
</head>
<body>
    <!-- Header -->
    <header class="header" id="header">
        <nav id="navbar" class="navbar">
            <div class="nav-content">
                <div class="logo"><a href="#"><i class="fa fa-paw"></i> PetVerse</a></div>
                <div class="nav-icons">
                    <button class="icon-btn"><i class="fa fa-shopping-cart"></i></button>
                    <button class="icon-btn"><i class="fa fa-user"></i></button>
                </div>
                <div class="search">
                    <input class="search-bar" type="text" placeholder=" Search pets, products or services">
                    <button class="search-btn"><i class="fa fa-search"></i></button>
                </div>
                <button class="hamburger" id="hamburger">
                    <i class="fa fa-bars"></i>
                </button>
                <ul class="nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/about">About</a></li>
                    <li><a href="/pets">Pets</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle">Products <i class="fa fa-angle-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="/products/petfood">Pet Food</a></li>
                            <li><a href="/products/toys">Toys</a></li>
                            <li><a href="/products/accessories">Accessories</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Services</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <div class="main-container">
        <!-- Filters Sidebar -->
        <div class="filters-sidebar">
            <h2>Filters</h2>
            
            <!-- Category Filter -->
            <div class="filter-section">
                <h3>Category</h3>
                <div class="filter-options">
                    <% categoryFilters.forEach(filter => { %>
                        <div class="filter-option">
                            <input type="checkbox" id="<%= filter.id %>" name="category" value="<%= filter.value %>">
                            <label for="<%= filter.id %>"><%= filter.label %></label>
                        </div>
                    <% }); %>
                </div>
            </div>
            
            <!-- Brand Filter -->
            <div class="filter-section">
                <h3>Brand</h3>
                <div class="filter-options">
                    <% brandFilters.forEach(filter => { %>
                        <div class="filter-option">
                            <input type="checkbox" id="<%= filter.id %>" name="brand" value="<%= filter.value %>">
                            <label for="<%= filter.id %>"><%= filter.label %></label>
                        </div>
                    <% }); %>
                </div>
            </div>
            
            <!-- Price Filter -->
            <div class="filter-section">
                <h3>Price Range</h3>
                <div class="price-filter">
                    <input type="number" id="min-price" placeholder="Min" min="0">
                    <span>to</span>
                    <input type="number" id="max-price" placeholder="Max" min="0">
                    <button id="apply-price">Apply</button>
                </div>
            </div>
            
            <!-- Rating Filter -->
            <div class="filter-section">
                <h3>Rating</h3>
                <div class="filter-options">
                    <% ratingFilters.forEach(filter => { %>
                        <div class="filter-option">
                            <input type="checkbox" id="<%= filter.id %>" name="rating" value="<%= filter.value %>">
                            <label for="<%= filter.id %>"><%= filter.label %></label>
                        </div>
                    <% }); %>
                </div>
            </div>
            
            <!-- Dynamic Filters based on category type -->
            <% if (dynamicFilters && dynamicFilters.length > 0) { %>
                <% dynamicFilters.forEach(section => { %>
                    <div class="filter-section">
                        <h3><%= section.title %></h3>
                        <div class="filter-options">
                            <% section.options.forEach(option => { %>
                                <div class="filter-option">
                                    <input type="checkbox" id="<%= option.id %>" name="<%= section.name %>" value="<%= option.value %>">
                                    <label for="<%= option.id %>"><%= option.label %></label>
                                </div>
                            <% }); %>
                        </div>
                    </div>
                <% }); %>
            <% } %>
            
            <button class="clear-filters">Clear All Filters</button>
        </div>

        <!-- Products Display Area -->
        <div class="products-container">
            <div class="products-header">
                <h1><%= categoryTitle %></h1>
                <select class="sort-dropdown">
                    <option value="popular">Most Popular</option>
                    <option value="newest">Newest First</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="rating">Highest Rated</option>
                </select>
            </div>

            <!-- Products Grid -->
            <div class="products-grid">
                <% products.forEach(product => { %>
                    <div class="product-card">
                        <div class="product-image">
                            <img src="<%= product.image %>" alt="<%= product.name %>">
                        </div>
                        <div class="product-info">
                            <h3 class="product-name"><%= product.name %></h3>
                            <p class="product-description"><%= product.description %></p>
                            <div class="product-price">â‚¹<%= product.price.toFixed(2) %></div>
                            <div class="product-rating">
                                <% for (let i = 1; i <= 5; i++) { %>
                                    <% if (i <= product.rating) { %>
                                        <i class="fas fa-star"></i>
                                    <% } else if (i - 0.5 <= product.rating) { %>
                                        <i class="fas fa-star-half-alt"></i>
                                    <% } else { %>
                                        <i class="far fa-star"></i>
                                    <% } %>
                                <% } %>
                                <span>(<%= product.reviewCount %>)</span>
                            </div>
                            <div class="product-action">
                                <button onclick="window.location.href='/products/detail'" class="add-to-cart">Add to Cart</button>
                                <button class="wishlist-btn"><i class="far fa-heart"></i></button>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>

            <!-- Pagination -->
            <div class="pagination">
                <button><i class="fas fa-chevron-left"></i></button>
                <button class="active">1</button>
                <button>2</button>
                <button>3</button>
                <button>...</button>
                <button>10</button>
                <button><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer id="footer">
        <div class="footer-container">
            <div class="footer-logo">
                <h2>PetVerse</h2>
                <p>Your one-stop destination for all pet needs</p>
            </div>
            <div class="footer-links">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Shop</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Events</a></li>
                    <li><a href="#">Contact Us</a></li>
                </ul>
            </div>
            <div class="footer-social">
                <h3>Follow Us</h3>
                <a href="https://facebook.com" target="_blank" class="social-icon">Facebook</a>
                <a href="https://instagram.com" target="_blank" class="social-icon">Instagram</a>
                <a href="https://twitter.com" target="_blank" class="social-icon">Twitter</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 PetVerse. All Rights Reversed</p>
        </div>
    </footer>

    <script>
        // Sample data (you'll replace this with server-side data)
        // This is just to demonstrate the structure
        const sampleData = {
            categoryTitle: 'Pet Food',
            categoryFilters: [
                { id: 'dog-food', value: 'dog-food', label: 'Dog Food' },
                { id: 'cat-food', value: 'cat-food', label: 'Cat Food' },
                { id: 'bird-food', value: 'bird-food', label: 'Bird Food' },
                { id: 'fish-food', value: 'fish-food', label: 'Fish Food' }
            ],
            brandFilters: [
                { id: 'royal-canin', value: 'royal-canin', label: 'Royal Canin' },
                { id: 'pedigree', value: 'pedigree', label: 'Pedigree' },
                { id: 'whiskas', value: 'whiskas', label: 'Whiskas' },
                { id: 'drools', value: 'drools', label: 'Drools' }
            ],
            ratingFilters: [
                { id: 'rating-4', value: '4', label: '4â˜… & above' },
                { id: 'rating-3', value: '3', label: '3â˜… & above' },
                { id: 'rating-2', value: '2', label: '2â˜… & above' }
            ],
            dynamicFilters: [
                {
                    title: 'Life Stage',
                    name: 'life-stage',
                    options: [
                        { id: 'puppy', value: 'puppy', label: 'Puppy' },
                        { id: 'adult', value: 'adult', label: 'Adult' },
                        { id: 'senior', value: 'senior', label: 'Senior' }
                    ]
                },
                {
                    title: 'Food Type',
                    name: 'food-type',
                    options: [
                        { id: 'dry', value: 'dry', label: 'Dry Food' },
                        { id: 'wet', value: 'wet', label: 'Wet Food' },
                        { id: 'treats', value: 'treats', label: 'Treats' }
                    ]
                }
            ],
            products: [
                {
                    id: 1,
                    name: 'Premium Dog Food',
                    description: 'High-quality nutrition for adult dogs with real chicken as the first ingredient.',
                    price: 1299.99,
                    image: '/images/dog-food-1.jpg',
                    rating: 4.5,
                    reviewCount: 128
                },
                {
                    id: 2,
                    name: 'Gourmet Cat Food',
                    description: 'Delicious seafood flavors that cats love with added vitamins.',
                    price: 899.50,
                    image: '/images/cat-food-1.jpg',
                    rating: 4.2,
                    reviewCount: 95
                },
                // Add more products as needed
            ]
        };

        const dropdownToggle = document.querySelector('.dropdown-toggle');
const dropdownMenu = document.querySelector('.dropdown-menu');

// Toggle dropdown when the toggle button is clicked
dropdownToggle.addEventListener('click', function(event) {
    event.stopPropagation(); // Prevent this click from triggering the document click handler
    dropdownMenu.classList.toggle('show');
});

// Close dropdown when clicking anywhere else on the page
document.addEventListener('click', function(event) {
    // Check if click is outside of the dropdown
    if (!event.target.closest('.dropdown')) {
        // If dropdown is open, close it
        if (dropdownMenu.classList.contains('show')) {
            dropdownMenu.classList.remove('show');
        }
    }
});

        // Filter functionality (for demo purposes)
        document.querySelector('.clear-filters').addEventListener('click', function() {
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            document.getElementById('min-price').value = '';
            document.getElementById('max-price').value = '';
        });
    </script>
</body>
</html>