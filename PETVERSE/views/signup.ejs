<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup - PetVerse</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="favi-modified.png">
    <link rel="stylesheet" href="/css/signup.css">
</head>
<body>
    <div class="signup-form-container">
        <div class="header">
            <h1 id="logo"><i class="fa fa-paw"></i> PetVerse</h1>
            <div class="login-header"> 
                <h2>Join PetVerse Today</h2>
                <p>Sign up to explore the world of PetVerse!</p>
            </div>
        </div>
        <div class="user-type-selector">
            <div class="user-type-option" data-type="pet-owner">
                <i class="fas fa-user"></i>
                <span>Pet Owner</span>
            </div>
            <div class="user-type-option" data-type="pet-seller">
                <i class="fas fa-store"></i>
                <span>Seller</span>
            </div>
            <div class="user-type-option" data-type="service-provider">
                <i class="fas fa-stethoscope"></i>
                <span>Service Provider</span>
            </div>
        </div>
        
        <form id="signup-form" method="POST" action="/signup">
            <div class="form-container">
                <div class="left-form">
                    <div class="input-group">
                        <input type="email" id="email" placeholder=" " required>
                        <label for="email">Email Address<span class="required">*</span></label>
                    </div>
                    <div class="input-group">
                        <input type="password" id="password" placeholder=" " required>
                        <label for="password">Password<span class="required">*</span></label>
                    </div>
                    <div class="input-group">
                        <input type="password" id="confirm-password" placeholder=" " required>
                        <label for="confirm-password">Confirm Password<span class="required">*</span></label>
                    </div>
                </div>
                <div class="right-form">
                    <div class="input-group">
                        <input type="text" id="username" placeholder=" " required>
                        <label for="username">Username<span class="required">*</span></label>
                    </div>
                    <div class="input-group">
                        <input type="text" id="phone-number" placeholder=" ">
                        <label for="phone-number">Phone</label>
                    </div>
                    <div class="input-group">
                        <input type="text" id="full-name" placeholder=" ">
                        <label for="full-name">Full Name</label>
                    </div>
                    
                    <!-- Additional fields based on user type -->
                    <div class="additional-fields" id="pet-owner-fields">
                    </div>
                    
                    <div class="additional-fields" id="pet-seller-fields">
                        <div class="input-group">
                            <input type="text" id="business-name" placeholder=" ">
                            <label for="business-name">Business Name<span class="required">*</span></label>
                        </div>
                        <div class="input-group">
                            <input type="text" id="license-number" style="cursor: pointer;">
                            <label for="license-number">License Number<span class="required">*</span></label>
                        </div>
                    </div>
                    
                    <div class="additional-fields" id="service-provider-fields">
                        <div class="input-group">
                            <select id="service-type">
                                <option value="" selected disabled></option>
                                <option value="vet">Veterinarian</option>
                                <option value="groomer">Groomer</option>
                                <option value="trainer">Trainer</option>
                                <option value="sitter">Pet Sitter</option>
                            </select>
                            <label for="service-type">Service Type<span class="required">*</span></label>
                        </div>
                        <div class="input-group">
                            <input type="text" id="certification" style="cursor: pointer;">
                            <label for="certification">Certification/License Number<span class="required">*</span></label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="options-group">
                <label class="terms-and-conditions">
                    <input type="checkbox" id="agree" required>
                    I agree to the <a href="#">Terms and Conditions</a> and <a href="#">Privacy Policy</a>
                </label>
            </div>
            
            <button type="submit" class="signup-button">Sign Up</button>
            <div class="login-link">
                Already have an account? <a href="/login">Log In</a>
            </div>
        </form>
    </div>
    <script src="/js/signup.js"></script>
    <script>document.addEventListener("DOMContentLoaded", function () {
            const form = document.getElementById("signup-form");
            const userTypeOptions = document.querySelectorAll(".user-type-option");
            let selectedUserType = "pet_owner"; // Default user type
        
            userTypeOptions.forEach(option => {
                option.addEventListener("click", function () {
                    selectedUserType = this.dataset.type;
                    
                    // Hide all additional fields
                    document.querySelectorAll(".additional-fields").forEach(field => {
                        field.style.display = "none";
                    });
        
                    // Show relevant fields
                    const selectedFields = document.getElementById(`${selectedUserType}-fields`);
                    if (selectedFields) selectedFields.style.display = "block";
                });
            });
        
            form.addEventListener("submit", function (event) {
                event.preventDefault(); // Prevent default form submission
        
                const formData = {
                    email: document.getElementById("email").value,
                    username: document.getElementById("username").value,
                    password: document.getElementById("password").value,
                    phone: document.getElementById("phone-number").value,
                    full_name: document.getElementById("full-name").value,
                    user_type: selectedUserType
                };
        
                if (selectedUserType === "pet-seller") {
                    formData.business_name = document.getElementById("business-name").value;
                    formData.license_number = document.getElementById("license-number").value;
                }
        
                if (selectedUserType === "service-provider") {
                    formData.service_type = document.getElementById("service-type").value;
                    formData.certification_number = document.getElementById("certification").value; // Changed to `certification_number`
                }
                
                console.log(JSON.stringify(formData));

                // Send data to server using Fetch API
                fetch("/signup", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(formData)
                })
                .then(response => response.json())
                .then(data => {
                    console.log("Success:", data);
                    alert("Account created successfully!");
                })
                .catch(error => {
                    console.error("Error:", error);
                    alert("Error creating account!");
                });
            });
        });
        </script>
</body>
</html>